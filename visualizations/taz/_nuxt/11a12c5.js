(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{306:function(t,e,n){var content=n(323);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(61).default)("74a60ec7",content,!0,{sourceMap:!1})},322:function(t,e,n){"use strict";n(306)},323:function(t,e,n){var r=n(60)(!1);r.push([t.i,".visualization-outer[data-v-1fe48e16]{min-height:100vh}.visualization-outer .visualization-container[data-v-1fe48e16]{width:100vw;height:100vh}.visualization-outer .visualization-container .labels[data-v-1fe48e16]{position:fixed;display:inline-flex;width:100%;background-color:#fff;font-size:12px}.visualization-outer .visualization-container .labels .column-1[data-v-1fe48e16]{width:25%}.visualization-outer .visualization-container .labels .column-2[data-v-1fe48e16]{width:38%}.visualization-outer .visualization-container .labels .column-3[data-v-1fe48e16]{width:33%}.visualization-outer .visualization-container .inner-container[data-v-1fe48e16]{border-bottom:1px dotted #000;display:inline-flex;max-height:70px;margin:15px auto 0;width:100%}.visualization-outer .visualization-container .inner-container svg[data-v-1fe48e16]{width:25%}.visualization-outer .visualization-container .inner-container svg.population[data-v-1fe48e16]{width:33%}.visualization-outer .visualization-container .inner-container div.country[data-v-1fe48e16]{width:38%;display:flex;justify-content:center;align-content:center;flex-direction:column}.visualization-outer .visualization-container .inner-container div.country p[data-v-1fe48e16]{width:90%;margin:auto;text-align:left;font-size:1.2rem}.visualization-outer .visualization-container .inner-container div.country p span[data-v-1fe48e16]{border:1px solid grey;border-radius:5px;padding:3px;font-size:.8rem}",""]),t.exports=r},344:function(t,e,n){"use strict";n.r(e);var r=n(22),o=(n(12),n(2),n(53),n(320)),c=n(341),l=n(337),d=n(338),h=n(339),v=n(343),f=n(346),y=n(333),m={name:"WaterTracker",asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$content,r=t.params,e.next=3,n(r.slug||"data","noHICs_reduced").fetch();case 3:return o=e.sent,e.abrupt("return",{WaterAccess:o});case 5:case"end":return e.stop()}}),e)})))()},data:function(){return{margins:{left:40,right:40,top:20,bottom:20},PopulationChartSizes:{width:100,height:50}}},computed:{sizeScale:function(){var t=Object(l.a)(this.WaterAccess.body.map((function(t){return t["People not using safely managed drinking water services (% of population)"]}))),e=this.PopulationChartSizes.height/3;return Object(c.a)().domain(t).range([e,2])},colorScale:function(){return Object(c.a)().domain([0,100]).interpolate(y.a).range([Object(f.b)("red"),Object(f.b)("lightblue")])},xScale:function(){var t=Object(d.a)(this.WaterAccess.body.map((function(t){return t.Year}))),e=Object(h.a)(this.WaterAccess.body.map((function(t){return t.Year}))),n=[this.margins.left,this.PopulationChartSizes.width-this.margins.right];return Object(c.a)().domain([t,e]).range(n)},yScale:function(){var t=Object(l.a)(this.WaterAccess.body.map((function(t){return+t["People using at least basic drinking water services (% of population)"]}))),e=[this.PopulationChartSizes.height-this.margins.top/2,this.margins.bottom];return Object(c.a)().domain(t).range(e)},lineGenerator:function(){return Object(v.a)().x((function(t){return t.x})).y0(this.PopulationChartSizes.height).y1((function(t){return t.y}))},countriesKeys:function(){return Object(o.uniq)(this.WaterAccess.body.map((function(t,i){return t.Country})))},groupedByCountry:function(){var t=this,e=this.WaterAccess.body.map((function(e,i,n){return{Country:e.Country,x:t.xScale(+e.Year),yearLabel:e.Year,population:+e["Population, total"],y:t.yScale(+e["People using at least basic drinking water services (% of population)"]),size:t.sizeScale(+e["People not using safely managed drinking water services (% of population)"])}}));return Object(o.groupBy)(e,"Country")},countriesLinecharts:function(){var t=this,e={};return this.countriesKeys.forEach((function(n){var r={};r[n]={country:n,population:Object(h.a)(t.groupedByCountry[n].map((function(p){return p.population})))},Object.assign(e,r)})),e}},mounted:function(){this.checkSizes()},methods:{checkSizes:function(){var t=this.$refs.population_chart;this.PopulationChartSizes.width=t[0].clientWidth,this.PopulationChartSizes.height=t[0].clientHeight}}},z=(n(322),n(62)),component=Object(z.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"visualization-outer"},[n("div",{staticClass:"visualization-container"},[t._m(0),t._v(" "),t._l(t.groupedByCountry,(function(e,r){return n("div",{key:r,staticClass:"inner-container"},[n("svg",t._l(e,(function(e,a){return n("g",{key:a,attrs:{transform:"translate(-30,0)"}},[n("rect",{attrs:{rx:"2",width:"5",height:e.y,x:e.x,y:t.PopulationChartSizes.height-5-e.y,fill:t.colorScale(e.y)}})])})),0),t._v(" "),n("div",{staticClass:"country"},[n("p",[t._v(t._s(r)+" "),n("span",[t._v(t._s(t.countriesLinecharts[r].population))])])]),t._v(" "),n("svg",{ref:"population_chart",refInFor:!0,staticClass:"population"},t._l(e,(function(t,a){return n("g",{key:a},[n("circle",{attrs:{cx:t.x,cy:"32",r:t.size,"fill-opacity":"0.5",stroke:"gray",fill:"lightblue"}})])})),0)])}))],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"labels"},[n("div",{staticClass:"column-1"},[t._v("\n        Access to clean water (%)\n      ")]),t._v(" "),n("div",{staticClass:"column-2"},[t._v("\n        Country\n      ")]),t._v(" "),n("div",{staticClass:"column-3"},[t._v("\n        Access to basic water services (%)\n      ")])])}],!1,null,"1fe48e16",null);e.default=component.exports}}]);